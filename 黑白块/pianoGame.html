<!DOCTYPE html>
<html>
<head lang="en">
<meta charset="UTF-8">
<title>Murphy's Game</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no" /> 
<meta http-equiv="Cache-Control" content="max-age=0" />
<meta name="apple-touch-fullscreen" content="yes" />
<meta name="apple-mobile-web-app-capable" content="yes" />
<meta name="apple-mobile-web-app-status-bar-style" content="black" />
<style>
*{margin:0;padding:0}
li,ul{list-style:none;}
a{text-decoration:none}
input{outline:none;padding-left:4px;font-family:"微软雅黑"}
img{border:0 none;vertical-align:middle;}
.hide{display:none;}
.fix:after{display:block; clear:both; content:""; visibility:hidden; height:0;}
.fix{zoom:1;}
html,body{height:100%;}

#main{position:relative;width:100%;max-width:640px;height:100%;margin:0 auto;overflow:hidden;}
.list{position:absolute;left:0;bottom:0;width:100%;height:100%;background:#fff;}
.list ul{width:100%;height:19.8%;margin-left:1px;}
.list li{float:left;width:24.3%;height:100%;border:1px solid #000;}
.list li.yes{background:#000;}
audio{display:none;}
</style>
</head>
<body>
<div id="main">
    <div class="list fix">
    </div>
    <audio id="music" src="http://s.2gei.com/pvaud/aud/mp3/d7/d754f6890b2b48a1a5c7369ca92c1f46.mp3?e=1423112340&token=SFUBINIQSdH81jWou5iE8UO8rJsvRRLzvNEWpczI:3GDWR3UF1YQPojXfXLgHq94qO7M="></audio>
</div>
<script src="http://code.jquery.com/jquery-1.8.3.min.js"></script> 
<script>
$(function(){
    list.append(creatLi(5));
    action();   
});
var list = $('.list'); 
var musicList = [1,1,5,5,6,6,5,4,4,3,3,2,2,1,
                 5,5,4,4,3,3,2,5,5,4,4,3,3,2];
var musicSrc = [
'http://s.2gei.com/pvaud/aud/mp3/d7/d754f6890b2b48a1a5c7369ca92c1f46.mp3?e=1423112340&token=SFUBINIQSdH81jWou5iE8UO8rJsvRRLzvNEWpczI:3GDWR3UF1YQPojXfXLgHq94qO7M=',
'http://s.2gei.com/pvaud/aud/mp3/54/5494b3598cca47e9afb16c6548d06de2.mp3?e=1423112340&token=SFUBINIQSdH81jWou5iE8UO8rJsvRRLzvNEWpczI:_jcJZaSnr0rzvsMAcgHGi2iuKKI=',
'http://s.2gei.com/pvaud/aud/mp3/a0/a0eb56525e6e4e68ba7ce6c24aa17e58.mp3?e=1423112400&token=SFUBINIQSdH81jWou5iE8UO8rJsvRRLzvNEWpczI:fnVPoFZfv_ScgD7es1b9QVd4EB8=',
'http://s.2gei.com/pvaud/aud/mp3/6a/6a9a9aeb174d48ea92759f86a58dff47.mp3?e=1423112400&token=SFUBINIQSdH81jWou5iE8UO8rJsvRRLzvNEWpczI:RRV8yf9YvVHSdPTnur8XYTYntU4=',
'http://s.2gei.com/pvaud/aud/mp3/52/5213ba4b0be3402ca25039065f80503c.mp3?e=1423112460&token=SFUBINIQSdH81jWou5iE8UO8rJsvRRLzvNEWpczI:gt3YD7b_R4-YPiQAt16GEl3hsmQ=',
'http://s.2gei.com/pvaud/aud/mp3/0e/0e4238a17086467bb07b0f48fb02b197.mp3?e=1423112460&token=SFUBINIQSdH81jWou5iE8UO8rJsvRRLzvNEWpczI:zEVjM2He2dbbHf8KGrR6z2yo5Tw=',
'http://s.2gei.com/pvaud/aud/mp3/ff/ff81cbf752254ef6bd6f5869815a4a60.mp3?e=1423112460&token=SFUBINIQSdH81jWou5iE8UO8rJsvRRLzvNEWpczI:f5fsMudY1yDxA9mu9Y44R6MnOs4=']
var thisMusic = 0;
var integral = 0;
var music = document.getElementById('music');
function creatLi(num){
    var rand;       
    var listHtml = '';

    for (var i = 0; i < num; i++) {        
        listHtml += '<ul>';
        rand = Math.floor(Math.random()*4);
        for (var j = 0; j < 4; j++) {
            if(rand == j){
                listHtml += '<li class="yes"></li>';
            }else{
                listHtml += '<li></li>';
            }
        } 
        listHtml += '</ul>';
    }
    return listHtml;
}
function action(){
     $('.list ul:last li').live('click',function(){
        if($(this).hasClass('yes')){
            if(thisMusic >= musicList.length){
                thisMusic = 0;
            }
            // music.src = 'music/'+(musicList[thisMusic])+'.mp3';
            music.src = musicSrc[musicList[thisMusic]];
            music.play();
            $('.list ul').last().remove();
            list.prepend(creatLi(1));
            thisMusic++;
            integral++;
        }else{
            $(this).css('background','red');
            alert('得分：'+ integral + '分!');
            window.location.reload();
        }
    });
}
</script>
</body>
</html>