<!doctype html>
<html onselectstart='return false'>
<head>
    <meta charset="utf-8">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
    <meta http-equiv="X-UA-Compatible" content="IE=8"/>
    <title>纯纯小公举</title>
    <script type="text/javascript" src="js/jquery-2.1.4.js"></script>
    <style type="text/css">
        body {
            margin: 0 auto;
            padding: 0;
            overflow: hidden;
            background: url(img/xkbj.jpg) no-repeat center center;
        }

        img {
            border: 0;
        }

        html, body {
            width: 100%;
            height: 100%;
            overflow: hidden
        }

        .box {
            width: 100%;
            overflow: hidden;
            height: 100%
        }

        .box > div {
            width: 4px;
            height: 4px;
            background: #cccccc;
            position: absolute;
            top: 0;
            right: 0;
            border-radius: 100%
        }

        .box > div > div {
            width: 3px;
            height: 3px;
            background: #ccc;
            position: absolute;
            top: -2px;
            right: -2px;
        }

        .box > div > div > div {
            width: 2px;
            height: 2px;
            background: #ccc;
            position: absolute;
            top: -2px;
            right: -2px;
        }

        .box > div > div > div div {
            width: 1px;
            height: 1px;
            background: #ccc;
            position: absolute;
            top: -1px;
            right: -1px;
        }

        #wrap {
            width: 120px;
            height: auto;
            margin: 300px auto;
            position: relative;
            transform-style: preserve-3d;
            transform: perspective(800px) rotateX(-10deg) rotatey(0deg);
            -moz-transform: perspective(800px) rotateX(-10deg) rotatey(0deg);
            -ms-transform: perspective(800px) rotateX(-10deg) rotatey(0deg);
            -o-transform: perspective(800px) rotateX(-10deg) rotatey(0deg);
            -webkit-transform: perspective(800px) rotateX(-10deg) rotatey(0deg);
        }

        #wrap img {
            width: 100%;
            height: auto;
            position: absolute;
            top: 0;
            left: 0;
            border-radius: 5px;
            box-shadow: 0 0 10px #FFFFFF;
            -webkit-box-reflect: below 8px -webkit-linear-gradient(top, rgba(0, 0, 0, 0) 50%, rgba(0, 0, 0, 0.50) 100%);
            transition: all 0.5s;
            -moz-transition: all 0.5s;
            -ms-transition: all 0.5s;
            -o-transition: all 0.5s;
            -webkit-transition: all 0.5s;
        }
    </style>
</head>
<body bgcolor="#000000">
<div id="wrap">
    <img src="img/1.jpg">
    <img src="img/2.jpg">
    <img src="img/3.jpg">
    <img src="img/4.jpg">
    <img src="img/5.jpg">
    <img src="img/6.jpg">
    <img src="img/7.jpg">
    <img src="img/8.jpg">
    <img src="img/9.jpg">
</div>
<div class="box"></div>
<audio src="Scarborough.mp3" autoplay loop></audio>
<script>
    $(function () {
        var imgl = $("#wrap img").size();
        var Deg = 360 / imgl;
        var roY = 0, roX = -10, xN, yN, play = null;
        $("#wrap img").each(function (i) {
            $(this).css({
                'transform': 'rotateY(' + i * Deg + 'deg) translateZ(300px)',
                '-moz-transform': 'rotateY(' + i * Deg + 'deg) translateZ(300px)',
                '-ms-transform': 'rotateY(' + i * Deg + 'deg) translateZ(300px)',
                '-o-transform': 'rotateY(' + i * Deg + 'deg) translateZ(300px)',
                '-webkit-transform': 'rotateY(' + i * Deg + 'deg) translateZ(300px)'
            });
            $(this).attr("ondragstart", "return false");
        });
        $(document).mousedown(function (ev) {
            /*clearInterval(play);*/
            var x_ = ev.clientX;
            var y_ = ev.clientY;
            $(this).bind('mousemove', function (ev) {
                var x = ev.clientX;
                var y = ev.clientY;
                xN = x - x_;
                yN = y - y_;
                roY += xN * 0.2;
                roX -= yN * 0.07;
                $('#wrap').css({
                    'transform': 'perspective(800px) rotateX(' + roX + 'deg) rotatey(' + roY + 'deg)',
                    '-moz-transform': 'perspective(800px) rotateX(' + roX + 'deg) rotatey(' + roY + 'deg)',
                    '-ms-transform': 'perspective(800px) rotateX(' + roX + 'deg) rotatey(' + roY + 'deg)',
                    '-o-transform': 'perspective(800px) rotateX(' + roX + 'deg) rotatey(' + roY + 'deg)',
                    '-webkit-transform': 'perspective(800px) rotateX(' + roX + 'deg) rotatey(' + roY + 'deg)'
                });
                x_ = ev.clientX;
                y_ = ev.clientY;
            })
        }).mouseup(function () {
            $(this).unbind("mousemove")
//            play = setInterval(function () {
//                xN = xN * 0.95;
//                if (Math.abs(yN) <= 0.5) {
//                    clearInterval(play);
//                }
//                roY += xN * 0.2;
//                roX -= yN * 0.07;
//                $('#wrap').css('transform', 'perspective(800px) rotateX(' + roX + 'deg) rotatey(' + roY + 'deg)');
//            }, 30)
        })
    });
    $(function () {
        var Timerr;

        function aa() {
            for (var i = 0; i < 4; i++) {
                var m = parseInt(Math.random() * 700 + 100);
                var j2 = parseInt(Math.random() * 300 + 1200);
                var j = parseInt(Math.random() * 1600 + 000);
                var j1 = parseInt(Math.random() * 300 + 300);
                var n = parseInt(Math.random() * 10 + (-10));
                $('.box').prepend('<div><div><div><div><div></div></div></div></div></div>');
                $('.box').children('div').eq(0).css({'left': j, 'top': n});
                $('.box').children('div').eq(0).animate({'left': j - j1, 'top': $(window).height() + 20}, j2)
            }
        }

        aa();
        setInterval(function () {
            aa();
        }, 300);
        setInterval(function () {
            for (var jj = 0; jj < $('.box>div').size() / 4; jj++) {
                $('.box>div').eq($('.box>div').size() - jj).remove();
            }
        }, 1000)
    });
</script>
</body>
</html>
